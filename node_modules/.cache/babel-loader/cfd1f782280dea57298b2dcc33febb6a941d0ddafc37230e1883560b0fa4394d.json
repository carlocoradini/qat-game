{"ast":null,"code":"import _objectSpread from\"C:/Users/carlo/Documents/BTI - UFRN/6semestre/IMD0522 - JOGOS DIGITAIS COMO FERRAMENTA PEDAG\\xD3GICA/qat-test/qat-test/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import{createContext,useContext,useState}from\"react\";import{loginUser,registerUser}from\"../services/api\";import{jsx as _jsx}from\"react/jsx-runtime\";const AuthContext=/*#__PURE__*/createContext();export function AuthProvider(_ref){let{children}=_ref;const[user,setUser]=useState(null);const[guestSession,setGuestSession]=useState(null);const login=async(username,password)=>{try{const loggedUser=await loginUser(username,password);setUser(loggedUser);setGuestSession(null);}catch(err){throw new Error(err.message);}};const register=async(username,password)=>{try{const newUser=await registerUser(username,password);setGuestSession(null);setUser(newUser);}catch(err){throw new Error(err.message);}};const logout=()=>{setUser(null);setGuestSession(null);};const startGuestSession=()=>{setGuestSession({id:\"guest_\".concat(Date.now()),games:[]});};const addGuestGame=gameData=>{if(guestSession){setGuestSession(prev=>_objectSpread(_objectSpread({},prev),{},{games:[...prev.games,gameData]}));}};return/*#__PURE__*/_jsx(AuthContext.Provider,{value:{user,guestSession,login,register,logout,startGuestSession,addGuestGame},children:children});}export function useAuth(){return useContext(AuthContext);}","map":{"version":3,"names":["createContext","useContext","useState","loginUser","registerUser","jsx","_jsx","AuthContext","AuthProvider","_ref","children","user","setUser","guestSession","setGuestSession","login","username","password","loggedUser","err","Error","message","register","newUser","logout","startGuestSession","id","concat","Date","now","games","addGuestGame","gameData","prev","_objectSpread","Provider","value","useAuth"],"sources":["C:/Users/carlo/Documents/BTI - UFRN/6semestre/IMD0522 - JOGOS DIGITAIS COMO FERRAMENTA PEDAGÃ“GICA/qat-test/qat-test/src/context/AuthContext.js"],"sourcesContent":["import { createContext, useContext, useState } from \"react\";\r\nimport { loginUser, registerUser } from \"../services/api\";\r\n\r\nconst AuthContext = createContext();\r\n\r\nexport function AuthProvider ({ children }) {\r\n    const [ user, setUser ] = useState(null);\r\n    const [ guestSession, setGuestSession ] = useState(null);\r\n\r\n    const login = async (username, password) => {\r\n        try {\r\n            const loggedUser = await loginUser(username, password)\r\n            setUser(loggedUser)\r\n            setGuestSession(null)\r\n        } catch ( err ) {\r\n            throw new Error(err.message)\r\n        }\r\n    }\r\n\r\n    const register = async (username, password) => {\r\n        try {\r\n            const newUser = await registerUser(username, password);\r\n            setGuestSession(null)\r\n            setUser(newUser)\r\n        } catch (err) {\r\n            throw new Error(err.message)\r\n        }\r\n    }\r\n\r\n    const logout = () => {\r\n        setUser(null)\r\n        setGuestSession(null)\r\n    }\r\n\r\n    const startGuestSession = () => {\r\n        setGuestSession({\r\n            id: `guest_${Date.now()}`,\r\n            games: [],\r\n        })\r\n    }\r\n\r\n    const addGuestGame = (gameData) => {\r\n        if(guestSession) {\r\n            setGuestSession((prev) => ({\r\n                ...prev,\r\n                games: [...prev.games, gameData]\r\n            }))\r\n        }\r\n    }\r\n\r\n    return (\r\n        <AuthContext.Provider \r\n            value={{\r\n                user,\r\n                guestSession,\r\n                login,\r\n                register,\r\n                logout,\r\n                startGuestSession,\r\n                addGuestGame\r\n            }}\r\n        >\r\n            {children}\r\n        </AuthContext.Provider>\r\n    )\r\n}\r\n\r\nexport function useAuth(){\r\n    return useContext(AuthContext)\r\n}"],"mappings":"2MAAA,OAASA,aAAa,CAAEC,UAAU,CAAEC,QAAQ,KAAQ,OAAO,CAC3D,OAASC,SAAS,CAAEC,YAAY,KAAQ,iBAAiB,CAAC,OAAAC,GAAA,IAAAC,IAAA,yBAE1D,KAAM,CAAAC,WAAW,cAAGP,aAAa,CAAC,CAAC,CAEnC,MAAO,SAAS,CAAAQ,YAAYA,CAAAC,IAAA,CAAgB,IAAd,CAAEC,QAAS,CAAC,CAAAD,IAAA,CACtC,KAAM,CAAEE,IAAI,CAAEC,OAAO,CAAE,CAAGV,QAAQ,CAAC,IAAI,CAAC,CACxC,KAAM,CAAEW,YAAY,CAAEC,eAAe,CAAE,CAAGZ,QAAQ,CAAC,IAAI,CAAC,CAExD,KAAM,CAAAa,KAAK,CAAG,KAAAA,CAAOC,QAAQ,CAAEC,QAAQ,GAAK,CACxC,GAAI,CACA,KAAM,CAAAC,UAAU,CAAG,KAAM,CAAAf,SAAS,CAACa,QAAQ,CAAEC,QAAQ,CAAC,CACtDL,OAAO,CAACM,UAAU,CAAC,CACnBJ,eAAe,CAAC,IAAI,CAAC,CACzB,CAAE,MAAQK,GAAG,CAAG,CACZ,KAAM,IAAI,CAAAC,KAAK,CAACD,GAAG,CAACE,OAAO,CAAC,CAChC,CACJ,CAAC,CAED,KAAM,CAAAC,QAAQ,CAAG,KAAAA,CAAON,QAAQ,CAAEC,QAAQ,GAAK,CAC3C,GAAI,CACA,KAAM,CAAAM,OAAO,CAAG,KAAM,CAAAnB,YAAY,CAACY,QAAQ,CAAEC,QAAQ,CAAC,CACtDH,eAAe,CAAC,IAAI,CAAC,CACrBF,OAAO,CAACW,OAAO,CAAC,CACpB,CAAE,MAAOJ,GAAG,CAAE,CACV,KAAM,IAAI,CAAAC,KAAK,CAACD,GAAG,CAACE,OAAO,CAAC,CAChC,CACJ,CAAC,CAED,KAAM,CAAAG,MAAM,CAAGA,CAAA,GAAM,CACjBZ,OAAO,CAAC,IAAI,CAAC,CACbE,eAAe,CAAC,IAAI,CAAC,CACzB,CAAC,CAED,KAAM,CAAAW,iBAAiB,CAAGA,CAAA,GAAM,CAC5BX,eAAe,CAAC,CACZY,EAAE,UAAAC,MAAA,CAAWC,IAAI,CAACC,GAAG,CAAC,CAAC,CAAE,CACzBC,KAAK,CAAE,EACX,CAAC,CAAC,CACN,CAAC,CAED,KAAM,CAAAC,YAAY,CAAIC,QAAQ,EAAK,CAC/B,GAAGnB,YAAY,CAAE,CACbC,eAAe,CAAEmB,IAAI,EAAAC,aAAA,CAAAA,aAAA,IACdD,IAAI,MACPH,KAAK,CAAE,CAAC,GAAGG,IAAI,CAACH,KAAK,CAAEE,QAAQ,CAAC,EAClC,CAAC,CACP,CACJ,CAAC,CAED,mBACI1B,IAAA,CAACC,WAAW,CAAC4B,QAAQ,EACjBC,KAAK,CAAE,CACHzB,IAAI,CACJE,YAAY,CACZE,KAAK,CACLO,QAAQ,CACRE,MAAM,CACNC,iBAAiB,CACjBM,YACJ,CAAE,CAAArB,QAAA,CAEDA,QAAQ,CACS,CAAC,CAE/B,CAEA,MAAO,SAAS,CAAA2B,OAAOA,CAAA,CAAE,CACrB,MAAO,CAAApC,UAAU,CAACM,WAAW,CAAC,CAClC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}