{"ast":null,"code":"import axios from\"axios\";const BASE_URL=\"http://localhost:3001\";const api=axios.create({baseURL:BASE_URL});export const getAllUsers=async()=>{const{data}=await api.get(\"/users\");return data;};export const registerUser=async(username,password)=>{const users=await getAllUsers();const userExists=users.some(user=>user.username===username);if(userExists)throw new Error(\"Username já existe!\");const newUser={username,password,gameIds:[]};const response=await api.post(\"/users\",newUser);return response.data;};export const loginUser=async(username,password)=>{const{data:users}=await api.get(\"/users\");const user=users.find(user=>user.username===username);if(!username)throw new Error(\"Username não encontrado\");if(user.password!==password)throw new Error(\"Senha incorreta!\");return user;};export const addGame=async(userId,gameData)=>{const{data:game}=await api.post(\"/games\",gameData);const{data:user}=await api.get(\"/users/\".concat(userId));const updatedGameIds=[...user.gameIds,game.gameId];await api.patch(\"/users/\".concat(userId),{gameIds:updatedGameIds});return game;};export const getUserGames=async userId=>{const{data:user}=await api.get(\"/users/\".concat(userId));const gamePromises=user.gameIds.map(id=>api.get(\"/games/\".concat(id)));const gameResponses=await Promise.all(gamePromises);return gameResponses.map(response=>response.data);};export const getAllGames=async()=>{const{data:games}=await api.get(\"/games\");return games;};","map":{"version":3,"names":["axios","BASE_URL","api","create","baseURL","getAllUsers","data","get","registerUser","username","password","users","userExists","some","user","Error","newUser","gameIds","response","post","loginUser","find","addGame","userId","gameData","game","concat","updatedGameIds","gameId","patch","getUserGames","gamePromises","map","id","gameResponses","Promise","all","getAllGames","games"],"sources":["C:/Users/carlo/Documents/BTI - UFRN/6semestre/IMD0522 - JOGOS DIGITAIS COMO FERRAMENTA PEDAGÓGICA/qat-test/qat-test/src/services/api.js"],"sourcesContent":["import axios from \"axios\"\r\n\r\nconst BASE_URL = \"http://localhost:3001\";\r\nconst api = axios.create({\r\n    baseURL: BASE_URL,\r\n})\r\n\r\nexport const getAllUsers = async () => {\r\n    const { data } = await api.get(\"/users\");\r\n    return data;\r\n}\r\n\r\nexport const registerUser = async (username, password) => {\r\n    const users = await getAllUsers();\r\n    const userExists = users.some(user => user.username === username)\r\n\r\n    if(userExists)\r\n        throw new Error(\"Username já existe!\");\r\n\r\n    const newUser = { username, password, gameIds: [] };\r\n    const response = await api.post(\"/users\", newUser)\r\n    return response.data\r\n}\r\n\r\nexport const loginUser = async (username, password) => {\r\n    const { data: users } = await api.get(\"/users\");\r\n    const user = users.find(user => user.username === username);\r\n\r\n    if(!username)\r\n        throw new Error(\"Username não encontrado\");\r\n\r\n    if(user.password !== password)\r\n        throw new Error(\"Senha incorreta!\")\r\n\r\n    return user\r\n}\r\n\r\nexport const addGame = async (userId, gameData) => {\r\n    const { data: game } = await api.post(\"/games\", gameData);\r\n\r\n    const { data: user } = await api.get(`/users/${userId}`);\r\n    const updatedGameIds = [...user.gameIds, game.gameId];\r\n\r\n    await api.patch(`/users/${userId}`, {\r\n        gameIds: updatedGameIds,\r\n    })\r\n\r\n    return game;\r\n}\r\n\r\nexport const getUserGames = async (userId) => {\r\n    const { data: user } = await api.get(`/users/${userId}`)\r\n    const gamePromises = user.gameIds.map(id => api.get(`/games/${id}`))\r\n    const gameResponses = await Promise.all(gamePromises)\r\n    return gameResponses.map(response => response.data)\r\n}\r\n\r\nexport const getAllGames = async () => {\r\n    const { data: games } = await api.get(\"/games\")\r\n    return games;\r\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}